\documentclass[11pt,a4paper,fleqn]{article}
\usepackage[utf8]{inputenc}
\usepackage{bsymb}
%usepackage[space]{ctex}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{algorithmic_pf}
\usepackage{indentfirst}
\usepackage[export]{adjustbox}
\usepackage{etoolbox}
\expandafter\patchcmd\csname Gin@ii\endcsname
  {\setkeys {Gin}{#1}}
  {%
    \setkeys {Gin}
      {max width=\textwidth,max height=.5\textwidth,keepaspectratio,#1}%
  }
  {}{}
\title{Homework  2.8}

\author{10175101126,10175101226,10175101117}
\date{April 2019}
\setkeys{Gin}{max width=\linewidth}
\begin{document}
\maketitle

\section{Exercise 1: prove the following:  g \in 0 \upto n-1 \rightarrow \mathbb{N},g(l)=min(g[k\upto n-1]) \vdash l \in k \upto n-1} 
\noindent
y = min(S) \vdash y \in S \\
g(l) = min(g[k\upto n-1]) \vdash g(l) \in g[k\upto n-1] \\
f \in A \rightarrow B,y \in f[S] \vdash \exists x \cdot x \in S \cap A \wedge y = f(x) \\
g \in 0 \upto n-1 \rightarrow N,g(l) \in g[k \upto n-1] \vdash \exists x \cdot x \in k \upto n-1 \cap 0 \upto n-1 \wedge g(l)=g(x) \\
g \in 0 \upto n-1 \rightarrow N,g(l) \in g[k \upto n-1] \vdash \exists x \cdot x \in k \upto n-1 \wedge g(l)=g(x) \\
f \in A \rightarrowtail B,i \in A,j \in A,f(i) = f(j) \\
g \in 0 \upto n-1 \rightarrowtail N,\exists x \cdot x \in k \upto n-1 \wedge g(l)=g(x) \vdash l = x \\
\exists x \cdot P(x) \wedge x = E \vdash P(E) \\
\exists x \cdot x \in k \upto n-1,l=x \vdash l \in k \upto n-1 \; AH \\

\section{Exercise 2: prove the invariant: \forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j)}
\noindent
PRE, \vdash [k:=0]\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \; INI \\
PRE, \vdash \forall i,j \cdot i \in 0 \upto -1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \\
PRE, k \neq n-1,\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \vdash [l:=g^{-1}(min(g[k\upto n-1])),g:=(\{k,l\} \domsub g) \cup {k \mapsto g(l),l \mapsto g(k)},k:=k+1]\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \; INV \\ 
PRE, k \neq n-1,\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \vdash [l:=g^{-1}(min(g[k\upto n-1])),g:=(\{k,l\} \domsub g) \cup {k \mapsto g(l),l \mapsto g(k)}]\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \;SPLIT \;HYP\\
PRE, k \neq n-1,\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \vdash [l:=g^{-1}(min(g[k\upto n-1])),g:=(\{k,l\} \domsub g) \cup {k \mapsto g(l),l \mapsto g(k)}] i=k \wedge j \in k+1 \upto n-1 \Rightarrow g(i)<g(j) \;SPLIT \\
i = k \vdash g(i)=g(k)=g(l)=min(g[k\upto n-1]) \\
PRE, k \neq n-1,\forall i,j \cdot i \in 0 \upto k-1 \wedge j \in i+1 \upto n-1 \Rightarrow g(i)<g(j) \vdash [l:=g^{-1}(min(g[k\upto n-1])),g:=(\{k,l\} \domsub g) \cup {k \mapsto g(l),l \mapsto g(k)}] j \in k+1 \upto n-1 \Rightarrow g(k)<g(j), g(k)=min(g[k\upto n-1]) \; AH \\

\section{Exercise 3: prove the loop establishes the following post-conditions: $ l = g^{-1}(min(g[k \upto n-1])) $}
\noindent
First of all, we can easily conclude the PRE:\\
$$l \ge 0, j \ge 0, n > k $$ $$l \in \mathbb{N}$$ 
$$ g \in 0 \upto n-1 \rightarrowtail \mathbb{N}$$
also the variant: \\
$$ j-l$$
also the invariant:\\
$$ l \in k \upto n-1 $$ $$j \in k \upto n-1 $$
$$min(g[k \upto n-1]) \in g[l \upto j] $$
% $$ j \ge l$$ $$ g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) $$ $$ g(j) = min(g(\{j\} \cup \{k \upto l-1 \}))$$
the post is :\\
$$ g(l) = min(g[k \upto n-1])$$ 
which means that $l = g^{-1}(min(g[k \upto n-1]))$, so we are supposed to prove:\\
$ PRE \ldots,\vdash g(l) = min(g[k \upto n-1])$\\

\noindent
In order to prove the post condition, we first need to put a auxiliary lemma:\\
$PRE, \ldots ,min(g[k \upto n-1]) \in g[l \upto j] \vdash l \le j $\\
$PRE, \ldots, l>j \vdash min(g[k \upto n-1]) \notin g[l \upto j] \quad \textb{CT1}$\\
$PRE, \ldots, l>j \vdash min(g[k \upto n-1]) \notin \emptyset $\\
obvious.\\

\noindent
then we do the proof of post:\\
Using the auxiliary lemma as an additional assumption$(Rule AH)$\\
$PRE,\ldots,l \in k \upto n-1,min(g[k \upto n-1]) \in g[l \upto j],l \le j \vdash g(l) = min(g[k \upto n-1])$\\
$PRE,\ldots,l \in k \upto n-1,min(g[k \upto n-1]) \in g[l \upto j],l \le j,l \ge j \vdash g(l) = min(g[k \upto n-1])$\\
$PRE,\ldots,l \in k \upto n-1,min(g[k \upto n-1]) \in g[l \upto j],l =j \vdash g(l) = min(g[k \upto n-1])$\\
$PRE,\ldots,min(g[k \upto n-1]) \in g[l \upto l] \vdash g(l) = min(g[k \upto n-1]) \quad \textb{EQL}$\\
$PRE,\ldots,min(g[k \upto n-1]) \in \{g(l)\} \vdash g(l) = min(g[k \upto n-1]) $\\
$PRE,\ldots,min(g[k \upto n-1]) = g(l) \vdash g(l) = min(g[k \upto n-1]) \quad \textb{HYP}$\\

therefore we can conclude that the loop establishes the post-condition $  l = g^{-1}(min(g[k \upto n-1])) $.\\    






% have errors this way
%\text{1. $j \ge l$}\\
%\textb{INI}:\\
%$PRE \vdash [l:= k,j:=n-1](j\ge l) $\\
%$PRE \vdash n-1 \ge k) $\\
%obvious in PRE that $ n-1 > k $.\\

%\noindent
% \text{INV}:\\
% when $g(l) < g(j) $\\
% $PRE,\ldots,l<j,j\ge l \vdash [j:=j-1](j\ge l)  $\\ 
% $PRE,\ldots,l<j,j\ge l \vdash j-1\ge l $\\ 
% obvious since $l<j $.\\
% when $g(l) \ge g(j)$\\
% $PRE,\ldots,l<j,j\ge l \vdash [l:=l+1](j\ge l)  $\\ 
% $PRE,\ldots,l<j,j\ge l \vdash j\ge l+1  $\\ 
% obvious since $l<j$.\\

% \noindent
% \textb{2. $g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) $}\\
% \textb{INI}:\\
% $PRE,\ldots \vdash [l:=k,j:=n-1](g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})))$\\
% $PRE,\ldots \vdash g(k) = min(g(\{k\} \cup\{n-1+1 \upto n-1\}))$\\
% $PRE,\ldots \vdash g(k) = min(g(\{k\}\cup\{n \upto n-1\}))$\\
% $PRE,\ldots \vdash g(k) = min(g(\{k\} \cup \emptyset))$\\
% $PRE,\ldots \vdash g(k) = min(g(\{k\})$\\
% $PRE,\ldots \vdash g(k) = g(k) $\\
% obvious.\\

% \noindent
% \textb{INV}:\\
% when $g(l) < g(j) $\\
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) \vdash [j:=j-1](g(l) = min(g(\{l\}\cup\{j+1 \upto n-1\})))  $\\ 
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) \vdash g(l) = min(g(\{l\} \cup\{j-1+1 \upto n-1\})))  $\\ 
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) \vdash g(l) = min(g(\{l\} \cup\{(j-1)+1 \upto n-1\}))  $\\ 
% $PRE,\ldots,g(l) < g(j),g(l) = min(g(\{l\} \cup\{j+1 \upto n-1\})) \vdash g(l) = min(g(\{l\} \cup\{j \upto n-1\}))  $\\ 
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{j \upto n-1\})) \vdash g(l) = min(g(\{l\}     \cup\{j \upto n-1\})) \quad\textb{HYP} $\\ 
% (since we have $ g(l) < g(j)$ and $ g(l) = min(g(\{l\} \cup\{k \upto l-1\}\cup\{j+1 \upto n-1\})))$\\

% \noindent
% when $g(l) \ge g(j)$\\
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{k \upto l-1\}\cup\{j+1 \upto n-1\})) \vdash [l:=l+1](g(l) = min(g(\{l\} \cup\{k \upto l-1\}\cup\{j+1 \upto n-1\})))  $\\ 
% $PRE,\ldots,g(l) = min(g(\{l\} \cup\{k \upto l-1\}\cup\{j+1 \upto n-1\})) \vdash g(l+1) = min(g(\{l+1\} \cup\{k \upto (l+1)-1\}\cup\{j+1 \upto n-1\})))  $\\ 
% $PRE,\ldots,g(l) \ge g(j),g(l) = min(g(\{l\} \cup\{k \upto l-1\}\cup\{j+1 \upto n-1\})) \vdash g(l) = min(g(\{l+1\} \cup\{k \upto l\}\cup\{j+1 \upto n-1\})))  $\\ 








\end{document}
