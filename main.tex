\documentclass[11pt,a4paper,fleqn]{article}
\usepackage[utf8]{inputenc}
\usepackage{bsymb}
%usepackage[space]{ctex}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{algorithmic_pf}
\usepackage{indentfirst}
\usepackage[export]{adjustbox}
\usepackage{etoolbox}
\expandafter\patchcmd\csname Gin@ii\endcsname
  {\setkeys {Gin}{#1}}
  {%
    \setkeys {Gin}
      {max width=\textwidth,max height=.5\textwidth,keepaspectratio,#1}%
  }
  {}{}
\title{Homework 4ï¼Œ5}

\author{10175101126,10175101226,10175101117}
\date{April 2019}
\setkeys{Gin}{max width=\linewidth}
\begin{document}
\maketitle

\section{ homework 2.4 }
\subsection{Rewrite PRE and POST }
\noindent
Add the prove process here: \\
%\setlength{\hangindent}{2em}



\subsection{Prove the invariants}
\noindent


\subsection{ Prove POST}
\noindent
$\ldots,g\in 0\upto n-1\rightarrow\mathbb{N}\vdash g\in 0\upto n-1\rightarrow\mathbb{N}\quad\text{HYP\quad and \quad SPLIT}$\\
\\
$ \ldots,i\leq j+1,i\geq j,i+j=n-1,$\\
$ \forall k\cdot k\in 0\upto i-1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in i\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
\\
$ \ldots,(i=j) \lor (i=j+1),i+j=n-1,$\\
$ \forall k\cdot k\in 0\upto i-1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in i\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
\\
$ \ldots,i=j,i+j=n-1,$\\
$ \forall k\cdot k\in 0\upto i-1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in i\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)\quad\text{OR\_H}$\\
\\
$ \ldots,j=n-1-j,$\\
$ \forall k\cdot k\in 0\upto j-1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in j\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)\quad\text{EQL}$\\
Obvious,since $j=n-1-j$ when $k=j$,we have $g(j)=f(j)=f(n-1-j)$\\
\\
$ \ldots,i=j+1,i+j=n-1,$\\
$ \forall k\cdot k\in 0\upto i-1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in i\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)\quad\text{OR\_H}$\\
\\
$ \ldots,j=n-1-j-1,$\\
$ \forall k\cdot k\in 0\upto j+1 \Rightarrow g(k)=f(n-1-k),$\\
$ \forall k\cdot k\in j+1\upto j \Rightarrow g(k)=f(k),$\\
$ \forall k\cdot k\in j+1\upto n-1 \Rightarrow g(k)=f(n-1-k)$\\
$\vdash \forall k\cdot k\in 0\upto n-1 \Rightarrow g(k)=f(n-1-k)\quad\text{EQL}$\\
Obvious,$(j+1\upto j)=\mathbb{\phi}$\\


\subsection{Propose a variant and prove it}
\noindent
since j-i decreased all the time,we choose j-i as the variant.\\
\\
$\text{NAT:}$\\
$\ldots,i<j\vdash j-i\in \mathbb{N}$\quad since $j-i>0$\\
$\text{VAR:}$\\
$ \ldots,i<j\vdash [i:=i+1;j:=j-1]j-i<j-i$\\
$ \ldots,i<j\vdash [i:=i+1][j:=j-1]j-i<j-i$\\
$ \ldots,i<j\vdash [i:=i+1]j-1-i<j-i$\\
$ \ldots,i<j\vdash j-1-i-1<j-i$\\
$ \ldots,i<j\vdash -2<0$


\subsection{Translate this program to C and execute it}
\noindent
Program is listed here:
\begin{figure}[h!]
\centering
\includegraphics{1.png}
\caption{ write in c}
\label{fig}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics{2.png}
\caption{ write in c}
\label{fig}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics{3.png}
\caption{ run }
\label{fig}
\end{figure}

\section{homework 2.5}
\subsection{Exercise 1: terminate this proof}
\noindent
case1:\\
$m \in (k + 1)+1 \upto j$\\
$\forall m \cdot m \in k+1 \upto j \Rightarrow g(m) > x  $\\
$\forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x $\\
$g(j+1) \leq x $\\
$\vdash$\\
$h(m)>x $\\

\noindent
where h is $ (\{k+1, j+1\} \domsub g) \cup\{k+1 \mapsto g(j+1), j+1 \mapsto g(k+1)\}$\\
\noindent so we have:\\
$h(m) = g(m)$ since $m>k+1 $ and $m<j+1$\\ 
\noindent Applying rule \text{U}\_\text{H}:\\
$g(m)>x $\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x $\\
$g(j+1) \leq x $\\
$m \in (k + 1)+1 \upto j$\\
$\vdash$\\
$g(m)>x \quad \text{HYP}$\\

\noindent
case2($m = j+1 $):\\



\subsection{Exercise 2: terminate this proof}
\noindent




\subsection{Exercise 3}

\subsubsection{Rewrite PRE- and POST-conditions}
\noindent
$\text{PRE:}$
$ n>0,f\in 0\upto n-1\rightarrowtail \mathbb{N},x\leq 0$\\
$\text{POST:}$
$k\in -1\upto n-1,$\\
$g\in 0\upto n-1\rightarrowtail\mathbb{N},$\\
$ran(g)=ran(f),$\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x ,$\\
$ \forall m \cdot m \in k+1 \upto n-1 \Rightarrow g(m)>x$\\

\subsubsection{Prove all invariants}

\subsubsection{Prove POST}
\noindent
$ \text{PRE},$
$j=n-1,$
$j\in -1\upto n-1,$
$k\in -1\upto j,$\\
$g\in 0\upto n-1\rightarrowtail\mathbb{N},$
$ran(g)=ran(f),$\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x ,$\\
$ \forall m \cdot m \in k+1 \upto j \Rightarrow g(m)>x$\\
$\vdash$\\
$k\in -1\upto n-1,$
$g\in 0\upto n-1\rightarrowtail\mathbb{N},$
$ran(g)=ran(f),$\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x ,$\\
$ \forall m \cdot m \in k+1 \upto n-1 \Rightarrow g(m)>x$\\
\\
$\text{PRE},$
$n-1\in -1\upto n-1,$
$k\in -1\upto n-1,$\\
$g\in 0\upto n-1\rightarrowtail\mathbb{N},$
$ran(g)=ran(f),$\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x ,$\\
$ \forall m \cdot m \in k+1 \upto n-1 \Rightarrow g(m)>x$\\
$\vdash$\\
$k\in -1\upto n-1,$
$g\in 0\upto n-1\rightarrowtail\mathbb{N},$
$ran(g)=ran(f),$\\
$ \forall m \cdot m \in 0 \upto k \Rightarrow g(m) \leq x ,$\\
$ \forall m \cdot m \in k+1 \upto n-1 \Rightarrow g(m)>x\quad \text{HYP\quad and\quad EQL}$\\



\subsubsection{Propose a variant and prove it}
\noindent
since j increases all the time, we choose n-1-j as the variant.\\ 
\\
$\text{NAT:}$\\
$ \ldots,j\in -1\upto n-1\vdash n-1-j\in \mathbb{N}$\quad since $j\leq n-1$\\
$\text{VAR:}$\\
$ \ldots,g(j+1)>x\vdash[j:=j+1]n-1-j<n-1-j$\\
$ \ldots,g(j+1)>x\vdash n-1-(j+1)<n-1-j$\\
$ \ldots,g(j+1)>x\vdash -1<0$\\
Obvious since $-1<0$\\
$ \ldots,g(j+1)\leq x\vdash[j:=j+1;g:=h;k:=k+1]n-1-j<n-1-j$\\
$ \ldots,g(j+1)\leq x\vdash[j:=j+1][g:=h][k:=k+1]n-1-j<n-1-j$\\
$ \ldots,g(j+1)\leq x\vdash[j:=j+1][g:=h]n-1-j<n-1-j$\\
$ \ldots,g(j+1)\leq x\vdash[j:=j+1]n-1-j<n-1-j$\\
$ \ldots,g(j+1)\leq x\vdash n-1-j-1<n-1-j$\\
$ \ldots,g(j+1)\leq x\vdash -1<0$\\
Obvious since $-1<0$\\

\subsubsection{Translate the program to C and run it}
Program is listed here:\\

\begin{figure}[h!]
\centering
\includegraphics{4.png}
\caption{ write in c}
\label{fig}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics{5.png}
\caption{ write in c}
\label{fig}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics{6.png}
\caption{ run }
\label{fig}
\end{figure}



%\bibliographystyle{plain}
%\bibliography{references}
\end{document}
